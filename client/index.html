<!DOCTYPE html>
<html>
  <head>
    <title>Back End Assessment</title>
  </head>
  <body class="container">
    <header>
      <h1> I am an assessment!</h1>
    </header>
    <main>
      <div id="fancyBtns">
        <button id="complimentButton">Get a compliment</button>
        <button id="fortuneButton">Fortune?</button>
      </div>
      <div>
        <form>
          <input type="text" id="simpleOne" placeholder="Watch what happens">
          <button>click</button>
        </form>
        <p>click your new phrase to delete!</p>
      </div>
      <!-- <div id="threeFeats">
          <form>
            <input type="text" id="inputOne" placeholder="Card name"/>
            <input type="text" id="inputTwo" placeholder="Cool rating 1-10"/>
            <input type="text" id="inputThree" placeholder="Image goes here"/>
              <button>Add</button>
          </form>
      </div> -->
      <section id="card-container"></section>
      
    </main>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
      const cardContainer = document.querySelector('#card-container')
      const form = document.querySelector('form')

      const baseURL = 'http://localhost:4000/api/cards'

      const cardsCallBack = ({ data: cards }) => displayCards(cards)
      const errCallBack = err => console.log(err)

      const getAllCards = () => axios.get(baseURL).then(cardsCallBack).catch(errCallBack)
      const createCard = body => axios.post(baseURL, body).then(cardsCallBack).catch(errCallBack)
      // const deleteCard = id => axios.delete(`${baseURL}/${id}`, {type}).then(cardsCallBack).catch(errCallBack)
      // const updateCard = (id, type) => axios.put(`${baseURL}/${id}`, {type}).then(cardsCallBack).catch(errCallBack)


      document.getElementById("complimentButton").onclick = function () {
        axios.get("http://localhost:4000/api/compliment/")
            .then(function (response) {
              const data = response.data;
              alert(data);
            });
      };
      document.getElementById("fortuneButton").onclick = function (){
        axios.get("http://localhost:4000/api/fortune/")
            .then(function (response){
              const data = response.data;
              alert(data);
            });
      };

      function submitHandler(e){
        e.preventDefault()

        let phrase = document.querySelector('#simpleOne')

        let bodyObj = {
          phrase: phrase.value
        }

        createCard(bodyObj)

        phrase.value = ''
      }

      function createRandomCard(card) {
        const randomCard = document.createElement('div')
        randomCard.classList.add('random-card')
        randomCard.addEventListener('click', deletePhrase)
        randomCard.innerHTML = `<h3>${card.phrase}</h3>
        `

        cardContainer.appendChild(randomCard)
      }

      function deletePhrase (e){
        e.target.remove();
      }

      function displayCards(arr) {
        cardContainer.innerHTML = ''
        for (let i = 0; i < arr.length; i++) {
          createRandomCard(arr[i])
        }
      }

      form.addEventListener('submit', submitHandler)
    </script>
  </body>
</html>
